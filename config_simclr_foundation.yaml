# config_simclr_foundation.yaml
# SimCLR Foundation Model Training Configuration

experiment:
  name: "stroke_foundation_simclr_t1only"
  output_dir: "/home/pahm409/stroke_foundation_experiments"
  seed: 42
  
model:
  architecture: "resnet3d"
  depth: 18  # ResNet3D-18
  projection_dim: 128
  hidden_dim: 512
  
training:
  # GPU configuration
  gpu_id: 7
  use_gpu: true
  mixed_precision: true  # Use AMP for faster training
  
  # Training parameters
  epochs: 200
  batch_size: 8  # Adjust based on GPU memory
  learning_rate: 0.0003
  weight_decay: 0.0001
  warmup_epochs: 10
  
  # SimCLR parameters
  temperature: 0.5
  
  # Optimization
  optimizer: "adam"
  scheduler: "cosine"
  
  # Checkpointing
  save_every: 10
  keep_top_k: 3
  
data:
  preprocessed_dir: "/home/pahm409/preprocessed_stroke_foundation"
  splits_file: "splits_stratified.json"
  
  # Dataset selection
  datasets:
    - "ATLAS"
    - "UOA_Private"
    # - "ISLES2022"  # Uncomment for multi-modal
    # - "ISLES2018"  # Use with caution - thin volumes
  
  # Data loading
  num_workers: 0  # Data is preprocessed, no workers needed
  pin_memory: true
  
  # Patch/Volume configuration
  use_full_volume: true
  patch_size: [96, 128, 128]  # [D, H, W]
  min_depth: 64  # Minimum depth for thin volumes
  adaptive_patching: true
  
  # Data augmentation
  augmentation:
    random_crop: true
    random_flip: true
    random_rotation: 15  # degrees
    random_scale: [0.9, 1.1]
    random_intensity: 0.1
    random_gamma: [0.8, 1.2]
    gaussian_noise: 0.01
    gaussian_blur: 0.5

logging:
  use_wandb: false  # Set to true if you have wandb
  log_every: 10
  save_images: true
  save_images_every: 50
